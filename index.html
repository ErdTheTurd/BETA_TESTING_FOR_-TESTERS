<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Religion Quiz</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50">

<div id="app"></div>

<script>
/* ---------------- DATA ---------------- */

const quizData = /* PASTE YOUR quizData OBJECT HERE UNCHANGED */;

/* ---------------- STATE ---------------- */

let category = null;
let questions = [];
let currentQuestion = 0;
let score = 0;
let selected = null;
let showResult = false;
let gameComplete = false;
let shuffledOptions = [];

/* ---------------- HELPERS ---------------- */

const shuffle = arr => [...arr].sort(() => Math.random() - 0.5);

function resetGame() {
  category = null;
  questions = [];
  currentQuestion = 0;
  score = 0;
  selected = null;
  showResult = false;
  gameComplete = false;
  shuffledOptions = [];
  render();
}

/* ---------------- RENDER ---------------- */

function render() {
  const app = document.getElementById("app");
  app.innerHTML = "";

  if (!category) return renderCategories(app);
  if (gameComplete) return renderResults(app);
  return renderQuestion(app);
}

/* ---------------- SCREENS ---------------- */

function renderCategories(app) {
  app.innerHTML = `
    <div class="min-h-screen flex items-center justify-center p-4">
      <div class="max-w-4xl w-full text-center">
        <h1 class="text-5xl font-bold text-gray-800 mb-3">Religion Quiz</h1>
        <p class="text-xl text-gray-600 mb-12">Test your knowledge of world religions</p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          ${[
            ['places','Places','üïå','from-blue-500 to-blue-600'],
            ['people','People','üë•','from-purple-500 to-purple-600'],
            ['culture','Culture','üé≠','from-pink-500 to-pink-600'],
            ['cuisine','Cuisine','üçΩÔ∏è','from-orange-500 to-orange-600'],
          ].map(c => `
            <button onclick="startCategory('${c[0]}')"
              class="bg-gradient-to-r ${c[3]} text-white rounded-2xl p-8 shadow-lg hover:shadow-xl hover:scale-105 transition">
              <div class="text-6xl mb-4">${c[2]}</div>
              <div class="text-2xl font-bold">${c[1]}</div>
            </button>
          `).join("")}
        </div>
      </div>
    </div>
  `;
}

function startCategory(cat) {
  category = cat;
  questions = shuffle(quizData[cat]);
  currentQuestion = 0;
  score = 0;
  showResult = false;
  gameComplete = false;
  shuffledOptions = shuffle(questions[0].options);
  render();
}

function renderQuestion(app) {
  const q = questions[currentQuestion];
  const isCorrect = selected === q.correct;

  app.innerHTML = `
    <div class="min-h-screen p-6 max-w-2xl mx-auto">

      <div class="flex justify-between mb-6">
        <button onclick="resetGame()" class="text-gray-600">‚Üê Back</button>
        <div class="text-sm">Score: ${score}</div>
      </div>

      <div class="mb-2 text-center text-sm text-gray-600">
        Question ${currentQuestion+1} of ${questions.length}
      </div>

      <div class="w-full h-3 bg-gray-200 rounded-full mb-6">
        <div class="h-full bg-gradient-to-r from-indigo-500 to-purple-600"
          style="width:${((currentQuestion+1)/questions.length)*100}%"></div>
      </div>

      <div class="bg-white rounded-3xl shadow-xl overflow-hidden mb-6">
        <img src="${q.image}" class="w-full h-80 object-cover">
      </div>

      <h2 class="text-2xl font-bold text-center mb-6">
        Which religion is this associated with?
      </h2>

      <div class="space-y-3 mb-6">
        ${shuffledOptions.map(opt => {
          let cls = "w-full p-4 rounded-xl font-semibold border-2 ";
          if (!showResult) cls += "bg-white border-gray-200 hover:bg-indigo-50";
          else if (opt === q.correct) cls += "bg-green-500 text-white border-green-600";
          else if (opt === selected) cls += "bg-red-500 text-white border-red-600";
          else cls += "bg-gray-100 text-gray-500 border-gray-200";

          return `<button onclick="answer('${opt}')" ${showResult?'disabled':''}
            class="${cls}">${opt}</button>`;
        }).join("")}
      </div>

      ${showResult ? `
        <div class="p-6 rounded-xl mb-6 ${isCorrect?'bg-green-50':'bg-red-50'}">
          <strong>${isCorrect?'Correct!':'Not quite!'}</strong>
          <p>${q.explanation}</p>
        </div>

        <button onclick="nextQuestion()"
          class="w-full bg-gradient-to-r from-indigo-500 to-purple-600 text-white py-4 rounded-xl font-bold">
          ${currentQuestion < questions.length-1 ? 'Next Question' : 'See Results'}
        </button>
      ` : ''}
    </div>
  `;
}

function answer(opt) {
  if (showResult) return;
  selected = opt;
  showResult = true;
  if (opt === questions[currentQuestion].correct) score++;
  render();
}

function nextQuestion() {
  if (currentQuestion < questions.length - 1) {
    currentQuestion++;
    selected = null;
    showResult = false;
    shuffledOptions = shuffle(questions[currentQuestion].options);
  } else {
    gameComplete = true;
  }
  render();
}

function renderResults(app) {
  const percent = Math.round((score / questions.length) * 100);
  app.innerHTML = `
    <div class="min-h-screen flex items-center justify-center p-6">
      <div class="bg-white p-10 rounded-3xl shadow-2xl text-center">
        <div class="text-6xl mb-4">${percent>=75?'üéâ':percent>=50?'üëç':'üìö'}</div>
        <h2 class="text-3xl font-bold mb-4">Quiz Complete</h2>
        <div class="text-5xl font-bold text-indigo-600 mb-2">${score}/${questions.length}</div>
        <p class="mb-6">${percent}% correct</p>
        <button onclick="resetGame()"
          class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white py-4 px-6 rounded-xl font-bold">
          Try Another Category
        </button>
      </div>
    </div>
  `;
}

/* ---------------- INIT ---------------- */

render();
</script>

</body>
</html>
